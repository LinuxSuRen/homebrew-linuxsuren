# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Cgit < Formula
  desc "cgit is a tiny tool for Chinese developers."
  homepage "https://github.com/linuxsuren/cgit"
  version "0.0.11"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/LinuxSuRen/cgit/releases/download/v0.0.11/cgit-darwin-amd64.tar.gz"
      sha256 "698fead2fe9bdb0d8c2ea91aed7dfdc8263c773af843bcd1ff74d12d2627291a"

      def install
        bin.install name

        prefix.install_metafiles
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/LinuxSuRen/cgit/releases/download/v0.0.11/cgit-darwin-arm64.tar.gz"
      sha256 "d5984e25e011822333f9eb85c3c40de218dcf861e154502f329974443d312c6c"

      def install
        bin.install name

        prefix.install_metafiles
      end
    end
  end

  on_linux do
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/LinuxSuRen/cgit/releases/download/v0.0.11/cgit-linux-arm64.tar.gz"
      sha256 "2bfa6cb7b1a14fc40b0056f1a4a7417cfcc01794cd2d799ad99387a38e78074b"

      def install
        bin.install name

        prefix.install_metafiles
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/LinuxSuRen/cgit/releases/download/v0.0.11/cgit-linux-amd64.tar.gz"
      sha256 "2bba2c9fc78b6b75d702465144c6ffafe56b284bb6435e70fa7d4e209ff2831c"

      def install
        bin.install name

        prefix.install_metafiles
      end
    end
  end

  depends_on "vim" => :optional
  depends_on "bash-completion" => :optional

  test do
    version_output = shell_output("#{bin}/cgit version")
    assert_match version.to_s, version_output
  end
end
